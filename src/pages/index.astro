---
import { getCollection, type CollectionEntry } from 'astro:content';
import Layout from '../layauts/Layaut.astro';
import Header from '../components/Header.astro';
import ProjectCard from '../components/ProjectCard.astro';

const allProjects = await getCollection('projects');
const sortedProjects = allProjects.sort(
  (a: CollectionEntry<'projects'>, b: CollectionEntry<'projects'>) => a.data.order - b.data.order
);
---

<Layout title="Diego Mardones | Análisis de Datos para PYMES">
  <Header />

  <main>
    <!-- HERO INTRODUCCIÓN -->
    <section class="text-center py-20 px-6 bg-gray-900 rounded-xl shadow-lg max-w-5xl mx-auto mt-12">
      <h1 class="text-4xl font-bold text-white mb-6">
        Análisis de datos que ayuda a tu negocio a vender más
      </h1>
      <p class="text-lg text-gray-300 max-w-2xl mx-auto mb-8">
        Si eres dueño de un minimarket, almacén o pequeño negocio en Chile,
        puedo ayudarte a entender tus ventas, detectar oportunidades y aumentar tus ganancias sin invertir más.
      </p>
      <div class="bg-gray-800 text-left p-6 rounded-lg max-w-xl mx-auto mb-8">
        <h2 class="text-xl font-semibold text-white mb-4">Cómo funciona:</h2>
        <ul class="text-gray-300 list-disc list-inside space-y-2">
          <li>Me envías tus registros de ventas (digital o cuaderno).</li>
          <li>Recibes un <strong>reporte claro</strong> con tus productos más rentables y recomendaciones.</li>
          <li>Primer mes <strong>gratis</strong>, resultados en menos de 5 días.</li>
        </ul>
      </div>
      <a href="#contacto" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-500">
        Quiero mi mes gratis
      </a>
    </section>

    <!-- SERVICIOS -->
    <section id="servicios" class="py-24 px-6 max-w-5xl mx-auto">
      <h2 class="text-3xl font-bold text-white mb-12 text-center">
        Servicios
      </h2>
      <div class="grid md:grid-cols-3 gap-8">
        <div class="bg-gray-800 p-6 rounded-xl shadow-lg">
          <h3 class="text-xl font-bold mb-4 text-white">Plan Básico – Reporte de Ventas</h3>
          <p class="mb-4 text-gray-300">
            CLP $5.000/mes. Top 5 productos más vendidos, margen estimado y sugerencias de promoción.
            Entrega en PDF o dashboard simple. Mes de prueba gratis.
          </p>
        </div>
        <div class="bg-gray-800 p-6 rounded-xl shadow-lg">
          <h3 class="text-xl font-bold mb-4 text-white">Plan Extendido – Ventas + Tendencias</h3>
          <p class="mb-4 text-gray-300">
            CLP $10.000/mes o $5.000 extra si tienes el básico. Incluye el básico +
            análisis de temporadas, comparativas y patrones de compra.
          </p>
        </div>
        <div class="bg-gray-800 p-6 rounded-xl shadow-lg">
          <h3 class="text-xl font-bold mb-4 text-white">Digitaliza y Analiza</h3>
          <p class="mb-4 text-gray-300">
            Para negocios que llevan ventas en cuaderno. Desde $10.000 el primer mes con digitalización incluida,
            luego plan básico o extendido mensual.
          </p>
        </div>
      </div>
    </section>

    <!-- EJEMPLOS DE REPORTES -->
    <section id="ejemplos" class="py-24 px-6 max-w-5xl mx-auto">
      <h2 class="text-3xl font-bold text-white mb-12 text-center">
        Ejemplos de Reportes
      </h2>
      <div class="flex flex-col md:flex-row gap-8 justify-center">
        <a href="/ejemplo-basico.pdf" class="bg-blue-600 text-white px-6 py-3 rounded-lg text-center hover:bg-blue-500">
          Descargar Reporte Básico
        </a>
        <a href="/ejemplo-extendido.pdf" class="bg-blue-600 text-white px-6 py-3 rounded-lg text-center hover:bg-blue-500">
          Descargar Reporte Extendido
        </a>
      </div>
    </section>

    <!-- PROYECTOS DESTACADOS -->
    <section id="projects" class="py-24 px-6 max-w-5xl mx-auto">
      <h2 class="text-3xl font-bold text-white mb-12 text-center">
        Proyectos Destacados
      </h2>
      <div class="flex flex-col gap-8">
        {sortedProjects.map((project: CollectionEntry<'projects'>) => (
          <ProjectCard project={project} />
        ))}
      </div>
    </section>

    <!-- CONTACTO -->
    <section id="contacto" class="py-24 px-6 max-w-5xl mx-auto text-center">
      <h2 class="text-3xl font-bold text-white mb-8">
        Contáctame
      </h2>
      <p class="text-gray-300 mb-4">
        WhatsApp: <a href="https://wa.me/569XXXXXXXX" class="text-blue-400 underline">+56 9 XXXXXXXX</a>
      </p>
      <p class="text-gray-300 mb-4">
        Email: <a href="mailto:contacto@diegomardones.cl" class="text-blue-400 underline">contacto@diegomardones.cl</a>
      </p>
    </section>
  </main>
</Layout>
