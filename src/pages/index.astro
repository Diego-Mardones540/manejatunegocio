---
// src/pages/index.astro
import { getCollection, type CollectionEntry } from 'astro:content';
import Layout from '../layauts/Layaut.astro';
import Header from '../components/Header.astro';
import Hero from '../components/Hero.astro';
import ProjectCard from '../components/ProjectCard.astro';

const allProjects = await getCollection('projects');
const sortedProjects = allProjects.sort(
  (a: CollectionEntry<'projects'>, b: CollectionEntry<'projects'>) => a.data.order - b.data.order
);
---
<Layout title="Diego Mardones | Portafolio de Datos">
  
  <Header />
  
  <main>
    <Hero />

    <section id="projects" class="py-24 px-6 max-w-4xl mx-auto">
      <h2 class="text-3xl font-bold text-white mb-12 text-center">
        Proyectos Destacados
      </h2>
      
      <div class="flex flex-col gap-8">
        {sortedProjects.map((project: CollectionEntry<'projects'>) => (
          <ProjectCard project={project} />
        ))}
      </div>
    </section>

  </main>
</Layout>